"use strict";(self.webpackChunkwp_event_solution=self.webpackChunkwp_event_solution||[]).push([[655],{18655:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(51609),r=n(56427),i=n(29491),l=n(47143),o=n(86087),s=n(27723),c=n(52619),d=n(67313),m=n(60742),u=n(92911),v=n(47152),_=n(16370),p=n(47767),g=n(74353),f=n.n(g),E=n(27154),h=n(54725),y=n(7638),x=n(72397),A=n(79664),w=n(18062),C=n(75613),T=n(59292),b=n(10012),D=n(6836),F=n(64282),k=n(69815);const{Title:S,Text:N}=d.A,Y=(0,l.withDispatch)((e=>{const t=e("eventin/global");return{setShouldRevalidateEventList:t.setRevalidateEventList,setTotalCount:e=>t.setTotalEvents(e)}})),z=(0,i.compose)(Y)((function(e){const[t,n]=(0,o.useState)(!1),{setShouldRevalidateEventList:i,setTotalCount:l}=e,[d]=m.A.useForm(),g=(0,p.useNavigate)(),Y=k.default.div`
		@media ( max-width: 460px ) {
			display: none;
		}
	`;return(0,a.createElement)("div",null,(0,a.createElement)(r.Fill,{name:E.PRIMARY_HEADER_NAME},(0,a.createElement)(u.A,{justify:"space-between",align:"center",gap:10,wrap:"wrap"},(0,a.createElement)(u.A,{align:"center",gap:16},(0,a.createElement)(y.Ay,{variant:y.Vt,icon:(0,a.createElement)(h.AngleLeftIcon,null),sx:{height:"36px",width:"36px",backgroundColor:"#fafafa",borderColor:"transparent",lineHeight:"1"},onClick:()=>g("/events")}),(0,a.createElement)(w.A,{title:(0,s.__)("Create New Event","eventin")})),(0,a.createElement)(Y,null,(0,a.createElement)(A.A,null)))),(0,a.createElement)(v.A,{gutter:[16,10],justify:"center",style:{margin:"10px 0px"},className:"eventin-create-event-form"},(0,a.createElement)(_.A,{md:12,xs:22,className:"eventin-create-event-form-container"},(0,a.createElement)(S,{level:3,style:{fontWeight:600,margin:"13px 0 8px 0",fontSize:"26px",lineHeight:"32px"}},(0,s.__)("Create your new event","eventin")),(0,a.createElement)(N,null,(0,s.__)("Draft first, edit later: Build your event step-by-step and refine it as you go.","eventin")),(0,a.createElement)(S,{level:4,style:{fontWeight:600,margin:"60px 0 20px 0",fontSize:"18px"}},(0,a.createElement)(h.ListOutlinedBorder,null)," ",(0,s.__)("Basic Information","eventin")),(0,a.createElement)(m.A,{form:d,name:"event-create-form",layout:"vertical",autoComplete:"on",onFinish:async()=>{const e={...d.getFieldsValue(!0)},t=e?.date_range,a={start_date:f()(t[0]).format("YYYY-MM-DD"),end_date:f()(t[1]).format("YYYY-MM-DD")},r=(0,D.dateFormatter)(a.start_date),o=(0,D.dateFormatter)(a.end_date),m=e.location,{address:u,place_id:v,latitude:_,longitude:p,...E}=Object.assign({},m);"offline"===e?.event_type?e.location={address:u?.toString()||"",place_id:v,latitude:_,longitude:p}:("custom_url"!==E?.integration&&(E.custom_url=""),e.location=E),n(!0);const h={...e,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,start_date:r,end_date:o,recurring_enabled:e.recurring_enabled?"yes":"no",event_recurrence:{...e.event_recurrence}};try{const e=await F.A.events.createEvent(h);l(1),i(!0),g(`${e?.id}/basic`),(0,c.doAction)("eventin_notification",{type:"success",message:(0,s.__)("Event Created successfully","eventin")})}catch(e){console.error("Something went wrong while creating event!"),console.error(e),(0,c.doAction)("eventin_notification",{type:"error",message:(0,s.__)("Couldn't Create Event!","eventin")})}finally{n(!1)}},scrollToFirstError:!0,initialValues:{interval_unit:"days",event_type:"offline"},requiredMark:(e,{required:t})=>(0,a.createElement)(a.Fragment,null,e,t&&(0,a.createElement)("span",{style:{color:"#FF4D4F",marginLeft:"4px"}},"*")),size:"large"},(0,a.createElement)(b.QN,{label:(0,s.__)("Event Title","eventin"),name:"title",required:!0,contextId:"eventin-event-title",tokenType:"short",tooltip:(0,s.__)("Event Title (This is the main title displayed for your event. Keep it catchy and informative.)","eventin"),form:d,rules:[{required:!0,message:(0,s.__)("Event title is required","eventin")}]}),(0,a.createElement)(x.A,{dateRange:"date_range",startDate:"start_date",startTime:"start_time",endDate:"end_date",endTime:"end_time",form:d}),(0,a.createElement)(T.A,{form:d,unitName:"recurrence_freq",intervalName:"recurrence_daily_interval",checkBoxName:"recurring_enabled",eventEnds:"recurrence_ends_on"}),(0,a.createElement)(S,{level:4,style:{fontSize:"18px",fontWeight:600,margin:"24px 0 22px 0"}},(0,a.createElement)(h.LocationOutlinedAlt,{width:18,height:18})," ",(0,s.__)("Event Type","eventin")),(0,a.createElement)(C.A,{form:d}),(0,a.createElement)(u.A,{gap:10,justify:"end",style:{margin:"42px 0px 0",padding:"20px 0",borderTop:"1px solid #D9D9D9"}},(0,a.createElement)(y.Ay,{variant:y.Qq,onClick:()=>{g("/events")},sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1",color:"#747474"}},(0,s.__)("Close","eventin")),(0,a.createElement)(y.Ay,{variant:y.zB,loading:t,htmlType:"submit",sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1"}},(0,s.__)("Create Event","eventin")))))))}))}}]);