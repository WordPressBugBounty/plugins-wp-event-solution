"use strict";(self.webpackChunkwp_event_solution=self.webpackChunkwp_event_solution||[]).push([[655],{72397:(e,t,n)=>{n.d(t,{A:()=>g});var a=n(51609),r=n(54861),i=n(47152),l=n(16370),o=n(60742),s=n(74353),m=n.n(s),c=n(17437),d=n(6836),u=n(78847);const g=e=>{const{startDate:t,endDate:n,startTime:s,endTime:g,dateRange:v,dateRangeLabel:p="Start Date & End Date",endDateLabel:f="End Date & Time",form:E,gutter:_=[8,0],mdCol:h=6,xsCol:x=12}=e,y=n,A=t,D=s,b=g,{RangePicker:T}=r.A,F=m()(new Date),w=[{required:!0,message:"Please select date range"},({getFieldValue:e})=>({validator(t,n){const a=e(y),r=m()(n),i=m()(a);return a&&i.isBefore(r)?Promise.reject("End Date can't be before Start date!"):Promise.resolve()}})],C=[{required:!0,message:"Please select start date"},({getFieldValue:e})=>({validator(t,n){const a=e(A),r=e(y),i=e(b);if(a&&r&&i){const e=(0,d.getFormattedDateTime)({date:a,time:n});if((0,d.getFormattedDateTime)({date:r,time:i}).isBefore(e,"minutes"))return Promise.reject("Start time must be before end time")}return Promise.resolve()}})],k=[{required:!0,message:"Please select end date"},({getFieldValue:e})=>({validator(t,n){const a=e(A),r=e(y),i=e(D);if(a&&r&&i){const e=(0,d.getFormattedDateTime)({date:a,time:i});if((0,d.getFormattedDateTime)({date:r,time:n}).isBefore(e,"minutes"))return Promise.reject("End time must be after start time")}return Promise.resolve()}})];return c.AH`
		.ant-picker {
			background-color: red;
		}
	`,(0,a.createElement)(i.A,{gutter:_},(0,a.createElement)(l.A,{xl:12,md:24},(0,a.createElement)(o.A.Item,{label:p,name:v,dependencies:[n],rules:w,className:"eventin-date-range-picker-wrapper"},(0,a.createElement)(T,{className:"eventin-date-range-picker",size:"large",style:{width:"100%"},minDate:F,format:(0,d.getDateFormat)(),onChange:e=>{const t={start_date:m()(e[0]).format("YYYY-MM-DD"),end_date:m()(e[1]).format("YYYY-MM-DD")},n=(0,d.dateFormatter)(t.start_date),a=(0,d.dateFormatter)(t.end_date);E.setFieldsValue({[A]:n,[y]:a})},popupClassName:"etn-ant-date-range-picker"}))),(0,a.createElement)(l.A,{xl:h,md:x,className:"eventin-start-time-range-picker-wrapper"},(0,a.createElement)(u.A,{label:"Start Time",name:s,rules:C})),(0,a.createElement)(l.A,{xl:h,md:x,className:"eventin-end-time-range-picker-wrapper"},(0,a.createElement)(u.A,{label:"End Time",name:g,rules:k})))}},18655:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var a=n(51609),r=n(56427),i=n(29491),l=n(47143),o=n(86087),s=n(27723),m=n(52619),c=n(67313),d=n(60742),u=n(92911),g=n(47152),v=n(16370),p=n(47767),f=n(74353),E=n.n(f),_=n(27154),h=n(54725),x=n(7638),y=n(72397),A=n(79664),D=n(18062),b=n(75613),T=n(59292),F=n(10012),w=n(6836),C=n(64282),k=n(69815);const{Title:Y,Text:N}=c.A,S=(0,l.withDispatch)((e=>{const t=e("eventin/global");return{setShouldRevalidateEventList:t.setRevalidateEventList,setTotalCount:e=>t.setTotalEvents(e)}})),M=(0,i.compose)(S)((function(e){const[t,n]=(0,o.useState)(!1),{setShouldRevalidateEventList:i,setTotalCount:l}=e,[c]=d.A.useForm(),f=(0,p.useNavigate)(),S=k.default.div`
		@media ( max-width: 460px ) {
			display: none;
		}
	`;return(0,a.createElement)("div",null,(0,a.createElement)(r.Fill,{name:_.PRIMARY_HEADER_NAME},(0,a.createElement)(u.A,{justify:"space-between",align:"center",gap:10,wrap:"wrap"},(0,a.createElement)(u.A,{align:"center",gap:16},(0,a.createElement)(x.Ay,{variant:x.Vt,icon:(0,a.createElement)(h.AngleLeftIcon,null),sx:{height:"36px",width:"36px",backgroundColor:"#fafafa",borderColor:"transparent",lineHeight:"1"},onClick:()=>f("/events")}),(0,a.createElement)(D.A,{title:"New Event"})),(0,a.createElement)(S,null,(0,a.createElement)(A.A,null)))),(0,a.createElement)(g.A,{gutter:[16,10],justify:"center",style:{margin:"10px 0px"},className:"eventin-create-event-form"},(0,a.createElement)(v.A,{md:12,xs:22,className:"eventin-create-event-form-container"},(0,a.createElement)(Y,{level:3,style:{fontWeight:600,margin:"13px 0 8px 0",fontSize:"26px",lineHeight:"32px"}},(0,s.__)("Create your new event","eventin")),(0,a.createElement)(N,null,(0,s.__)("Draft first, edit later: Build your event step-by-step and refine it as you go.","eventin")),(0,a.createElement)(Y,{level:4,style:{fontWeight:600,margin:"60px 0 20px 0",fontSize:"18px"}},(0,a.createElement)(h.ListOutlinedBorder,null)," ",(0,s.__)("Basic Information","eventin")),(0,a.createElement)(d.A,{form:c,name:"event-create-form",layout:"vertical",autoComplete:"on",onFinish:async()=>{const e={...c.getFieldsValue(!0)},t=e?.date_range,a={start_date:E()(t[0]).format("YYYY-MM-DD"),end_date:E()(t[1]).format("YYYY-MM-DD")},r=(0,w.dateFormatter)(a.start_date),o=(0,w.dateFormatter)(a.end_date),d=e.location,{address:u,place_id:g,latitude:v,longitude:p,..._}=Object.assign({},d);"offline"===e?.event_type?e.location={address:u?.toString()||"",place_id:g,latitude:v,longitude:p}:("custom_url"!==_?.integration&&(_.custom_url=""),e.location=_),n(!0);const h={...e,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,start_date:r,end_date:o,recurring_enabled:e.recurring_enabled?"yes":"no",event_recurrence:{...e.event_recurrence}};try{const e=await C.A.events.createEvent(h);l(1),i(!0),f(`${e?.id}/basic`),(0,m.doAction)("eventin_notification",{type:"success",message:(0,s.__)("Event Created successfully","eventin")})}catch(e){console.error("Something went wrong while creating event!"),console.error(e),(0,m.doAction)("eventin_notification",{type:"error",message:(0,s.__)("Couldn't Create Event!","eventin")})}finally{n(!1)}},scrollToFirstError:!0,initialValues:{interval_unit:"days",event_type:"offline"},requiredMark:(e,{required:t})=>(0,a.createElement)(a.Fragment,null,e,t&&(0,a.createElement)("span",{style:{color:"#FF4D4F",marginLeft:"4px"}},"*")),size:"large"},(0,a.createElement)(F.QN,{label:"Event Title",name:"title",required:!0,contextId:"eventin-event-title",tokenType:"short",tooltip:"Event Title (This is the main title displayed for your event. Keep it catchy and informative.)",form:c,rules:[{required:!0,message:"Event title is required"}]}),(0,a.createElement)(y.A,{dateRange:"date_range",startDate:"start_date",startTime:"start_time",endDate:"end_date",endTime:"end_time",form:c}),(0,a.createElement)(T.A,{form:c,unitName:"recurrence_freq",intervalName:"recurrence_daily_interval",checkBoxName:"recurring_enabled",eventEnds:"recurrence_ends_on"}),(0,a.createElement)(Y,{level:4,style:{fontSize:"18px",fontWeight:600,margin:"24px 0 22px 0"}},(0,a.createElement)(h.LocationOutlinedAlt,{width:18,height:18})," ",(0,s.__)("Event Type","eventin")),(0,a.createElement)(b.A,{form:c}),(0,a.createElement)(u.A,{gap:10,justify:"end",style:{margin:"42px 0px 0",padding:"20px 0",borderTop:"1px solid #D9D9D9"}},(0,a.createElement)(x.Ay,{variant:x.Qq,onClick:()=>{f("/events")},sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1",color:"#747474"}},(0,s.__)("Close","eventin")),(0,a.createElement)(x.Ay,{variant:x.zB,loading:t,htmlType:"submit",sx:{fontSize:"16px",fontWeight:"600",height:"44px",lineHeight:"1"}},(0,s.__)("Create Event","eventin")))))))}))}}]);